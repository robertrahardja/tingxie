<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Timing Tool</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        .audio-player {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        audio {
            width: 100%;
            margin-bottom: 10px;
        }
        .time-display {
            font-size: 24px;
            font-weight: bold;
            color: #2196F3;
            text-align: center;
            padding: 10px;
            background: #E3F2FD;
            border-radius: 6px;
            margin-bottom: 10px;
        }
        .sentence-list {
            margin-top: 20px;
        }
        .sentence-item {
            background: #f8f9fa;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 6px;
            border-left: 4px solid #ccc;
        }
        .sentence-item.active {
            background: #FFF9E6;
            border-left-color: #FF6B6B;
        }
        .sentence-chinese {
            font-size: 16px;
            margin-bottom: 8px;
            color: #333;
        }
        .sentence-timing {
            font-size: 14px;
            color: #666;
            display: flex;
            gap: 15px;
            align-items: center;
        }
        .timing-input {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        .timing-input input {
            width: 80px;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        .timing-input button {
            padding: 5px 12px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }
        .timing-input button:hover {
            background: #45a049;
        }
        .result-box {
            margin-top: 30px;
            padding: 20px;
            background: #E8F5E9;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }
        .result-box h3 {
            margin-top: 0;
            color: #2E7D32;
        }
        .result-code {
            background: white;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            white-space: pre-wrap;
            overflow-x: auto;
        }
        .instructions {
            background: #E3F2FD;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #2196F3;
        }
        .instructions h3 {
            margin-top: 0;
            color: #1976D2;
        }
        .instructions ol {
            margin: 10px 0;
            padding-left: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¯ Audio Timing Tool - å®¶åº­å‡èšåŠ›</h1>

        <div class="instructions">
            <h3>ğŸ“‹ ä½¿ç”¨è¯´æ˜</h3>
            <ol>
                <li>æ’­æ”¾éŸ³é¢‘ï¼Œå¬åˆ°æ¯ä¸ªå¥å­å¼€å§‹æ—¶ï¼Œç‚¹å‡»å¯¹åº”çš„ "æ ‡è®°å¼€å§‹" æŒ‰é’®</li>
                <li>å¬åˆ°æ¯ä¸ªå¥å­ç»“æŸæ—¶ï¼Œç‚¹å‡»å¯¹åº”çš„ "æ ‡è®°ç»“æŸ" æŒ‰é’®</li>
                <li>å®Œæˆåï¼Œå¤åˆ¶åº•éƒ¨ç”Ÿæˆçš„ä»£ç æ›¿æ¢åˆ° HTML æ–‡ä»¶ä¸­</li>
            </ol>
        </div>

        <div class="audio-player">
            <audio id="audio" controls>
                <source src="audio/family-cohesion/story.mp4" type="audio/mp4">
            </audio>
            <div class="time-display" id="time-display">0.00s</div>
        </div>

        <div class="sentence-list" id="sentence-list">
            <!-- Sentences will be inserted here -->
        </div>

        <div class="result-box">
            <h3>âœ… ç”Ÿæˆçš„ä»£ç </h3>
            <div class="result-code" id="result-code">
                æ ‡è®°å®Œæ‰€æœ‰å¥å­åï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºä»£ç ...
            </div>
        </div>
    </div>

    <script>
        const sentences = [
            "åœ¨å›¾ç‰‡ä¸­ï¼Œæˆ‘çœ‹åˆ°ä¸€ä¸ªé˜³å…‰æ™®ç…§çš„ä¸Šåˆï¼Œçˆ¸çˆ¸é©¾è½¦å¸¦ç€å…¨å®¶äººå»æµ·è¾¹é‡é¤ã€‚",
            "æµ·è¾¹æœ‰å¾ˆå¤šäººï¼Œæœ‰çš„åœ¨æ¸¸æ³³ï¼Œæœ‰çš„åœ¨æ™’å¤ªé˜³ï¼Œæœ‰çš„åœ¨ç©æ¸¸æˆï¼Œååˆ†çƒ­é—¹ã€‚",
            "çˆ¸çˆ¸å¦ˆå¦ˆå…ˆé“ºå¥½å¸­å­ï¼Œå†æ‘†ä¸Šé£Ÿç‰©ï¼Œæœ€åä»–ä»¬ä¾¿ååœ¨å¸­å­ä¸Šä¸€è¾¹æ‹ç…§ä¸€è¾¹è°ˆå¤©ã€‚",
            "å“¥å“¥å’Œå¦¹å¦¹åˆ™è·‘åˆ°æ²™æ»©ä¸Šç©æ‰”é£ç›˜çš„æ¸¸æˆï¼Œç©å¾—å¾ˆå¼€å¿ƒã€‚",
            "åˆ°äº†ä¸‹åˆï¼Œå¤©æ°”å˜å¾—ååˆ†ç‚çƒ­ï¼Œå¤§å®¶ä¾¿ä¸€èµ·æ”¶æ‹¾ä¸œè¥¿ï¼Œä¾ä¾ä¸èˆåœ°å›å®¶äº†ã€‚"
        ];

        const englishTranslations = [
            "In the picture, I see a sunny morning where Dad drives the whole family to the beach for a picnic.",
            "There are many people at the beach - some swimming, some sunbathing, some playing games - it's very lively.",
            "Mom and Dad first lay out the mat, then arrange the food, and finally they sit on the mat chatting while taking photos.",
            "The older brother and younger sister run to the beach to play frisbee, having a lot of fun.",
            "In the afternoon, the weather became very hot, so everyone packed up and reluctantly went home."
        ];

        const timings = sentences.map(() => ({ start: null, end: null }));
        const audio = document.getElementById('audio');
        const timeDisplay = document.getElementById('time-display');
        const sentenceList = document.getElementById('sentence-list');
        const resultCode = document.getElementById('result-code');

        // Update time display
        audio.addEventListener('timeupdate', () => {
            timeDisplay.textContent = audio.currentTime.toFixed(2) + 's';
        });

        // Create sentence items
        sentences.forEach((sentence, index) => {
            const item = document.createElement('div');
            item.className = 'sentence-item';
            item.id = `sentence-${index}`;

            item.innerHTML = `
                <div class="sentence-chinese">${index + 1}. ${sentence}</div>
                <div class="sentence-timing">
                    <div class="timing-input">
                        <button onclick="markStart(${index})">æ ‡è®°å¼€å§‹</button>
                        <input type="number" step="0.1" id="start-${index}" placeholder="å¼€å§‹æ—¶é—´">
                    </div>
                    <div class="timing-input">
                        <button onclick="markEnd(${index})">æ ‡è®°ç»“æŸ</button>
                        <input type="number" step="0.1" id="end-${index}" placeholder="ç»“æŸæ—¶é—´">
                    </div>
                    <span id="duration-${index}"></span>
                </div>
            `;

            sentenceList.appendChild(item);
        });

        function markStart(index) {
            const currentTime = audio.currentTime;
            timings[index].start = currentTime;
            document.getElementById(`start-${index}`).value = currentTime.toFixed(2);
            updateResult();
            updateDuration(index);
        }

        function markEnd(index) {
            const currentTime = audio.currentTime;
            timings[index].end = currentTime;
            document.getElementById(`end-${index}`).value = currentTime.toFixed(2);
            updateResult();
            updateDuration(index);
        }

        function updateDuration(index) {
            const start = timings[index].start;
            const end = timings[index].end;
            if (start !== null && end !== null) {
                const duration = end - start;
                document.getElementById(`duration-${index}`).textContent = `æ—¶é•¿: ${duration.toFixed(2)}s`;
            }
        }

        function updateResult() {
            let code = '';
            sentences.forEach((sentence, index) => {
                const start = timings[index].start !== null ? timings[index].start.toFixed(2) : '0';
                const end = timings[index].end !== null ? timings[index].end.toFixed(2) : '0';

                code += `                <div class="sentence" data-start="${start}" data-end="${end}">
                    <span class="chinese">${sentence}</span>
                    <span class="english-translation">${englishTranslations[index]}</span>
                </div>\n`;
            });

            resultCode.textContent = code;
        }

        // Highlight current sentence while playing
        audio.addEventListener('timeupdate', () => {
            const currentTime = audio.currentTime;
            sentences.forEach((_, index) => {
                const start = timings[index].start;
                const end = timings[index].end;
                const item = document.getElementById(`sentence-${index}`);

                if (start !== null && end !== null && currentTime >= start && currentTime < end) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
        });
    </script>
</body>
</html>
